//# sourceMappingURL=s60team_idb.min.js.map
function AJAXandStoreImage(img_link,img_id){var indexedDB=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.OIndexedDB||window.msIndexedDB,IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.OIDBTransaction||window.msIDBTransaction,dbVersion=1;var URL=window.URL||window.webkitURL;var request=indexedDB.open("s60teamFiles",dbVersion),db,createObjectStore=function(dataBase){dataBase.createObjectStore("pictures")},getImageFile=function(){var xhr=new XMLHttpRequest,blob;xhr.open("GET",img_link,true);xhr.responseType="blob";xhr.addEventListener("load",function(){if(xhr.status===200){blob=xhr.response;putFoxInDb(blob)}},false);xhr.send()},putFoxInDb=function(blob){var transaction=db.transaction(["pictures"],"readwrite");try{var rez=transaction.objectStore("pictures").put(blob,img_id);transaction.objectStore("pictures").get(img_id).onsuccess=function(event){var imgFile=event.target.result;var imgURL=URL.createObjectURL(imgFile);document.getElementById(img_id).setAttribute("src",imgURL)}}catch(e){}};request.onerror=function(event){};request.onsuccess=function(event){db=request.result;db.onerror=function(event){};if(db.setVersion){if(db.version!=dbVersion){var setVersion=db.setVersion(dbVersion);setVersion.onsuccess=function(){createObjectStore(db);getImageFile()}}else{getImageFile()}}else{var transaction2=db.transaction(["pictures"],"readwrite");transaction2.objectStore("pictures").get(img_id).onsuccess=function(event){try{var imgFile2=event.target.result;var imgURL2=URL.createObjectURL(imgFile2);document.getElementById(img_id).setAttribute("src",imgURL2)}catch(e){getImageFile()}};transaction2.objectStore("pictures").get(img_id).onerror=function(event){getImageFile()}}};request.onupgradeneeded=function(event){createObjectStore(event.target.result)}}